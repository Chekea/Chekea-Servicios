"use strict";(self.webpackChunkmy_react_appo=self.webpackChunkmy_react_appo||[]).push([[291],{1291:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var a=n(9950),o=n(6491),r=n(5333),i=n(6639),s=n(899),l=n(2053),c=n(5277),m=n(5308),d=n(9890),u=n(226),p=n(7901),x=n(2578),g=n(3849),b=n(1975),h=n(294),f=n(2845),y=n(9751),j=n(4414);const A=e=>{let{file:t,onRemove:n,index:i,sx:s}=e;const[l,c]=(0,a.useState)("");return(0,a.useEffect)((()=>{if(t){const e=URL.createObjectURL(t);return c(e),()=>{URL.revokeObjectURL(e)}}}),[t]),(0,j.jsx)(o.A,{sx:{position:"relative",display:"inline-block"},children:t?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("img",{src:l,alt:"Preview",style:{maxWidth:"100px",maxHeight:"100px"}}),(0,j.jsx)(r.A,{color:"error",size:"small",onClick:()=>n(t),sx:{position:"absolute",top:0,right:0},children:"\xd7"})]}):(0,j.jsx)(o.A,{sx:{width:"100px",height:"100px",border:"1px dashed gray",display:"flex",alignItems:"center",justifyContent:"center",color:"gray"},children:i+1})})},w=()=>{const[e,t]=(0,a.useState)(""),[n,w]=(0,a.useState)(""),[v,C]=(0,a.useState)(""),[S,k]=(0,a.useState)(""),[P,z]=(0,a.useState)(0),[E,D]=(0,a.useState)(""),[I,R]=(0,a.useState)(!1),[H,W]=(0,a.useState)(""),[F,U]=(0,a.useState)([]),[B,L]=(0,a.useState)("Aerea"),[M,O]=(0,a.useState)(null),[q,V]=(0,a.useState)(null),[K,T]=(0,a.useState)([]),[N,J]=(0,a.useState)(!0),[Z,_]=(0,a.useState)(null),[G,Y]=(0,a.useState)(null),[Q,X]=(0,a.useState)(null),[$,ee]=(0,a.useState)(null);let te="Moda & Accesorios",ne="China";console.log("eiby bielo");const[ae,oe]=(0,a.useState)([]),[re,ie]=(0,a.useState)([]);console.log(te);const[se,le]=(0,a.useState)([]),[ce,me]=(0,a.useState)({}),[de,ue]=(0,a.useState)(""),[pe,xe]=(0,a.useState)(""),[ge,be]=(0,a.useState)(""),he=((0,x.C3)(h.A),(0,g.aU)(h.A));const fe=(0,y.c7)(h.A);(0,x.C3)(h.A),(0,g.aU)(h.A);const ye=()=>Date.now();function je(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s]/gi,"")}console.log("HOALA MUDNO CRUEL");console.log("hola mundo cruel");const[Ae,we]=(0,a.useState)([]);return(0,j.jsxs)(j.Fragment,{children:[I&&(0,j.jsx)(o.A,{sx:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",bgcolor:"rgba(0,0,0,0.4)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:9999},children:(0,j.jsx)(i.A,{size:60,color:"primary"})}),(0,j.jsxs)(o.A,{sx:{paddingTop:{xs:10,sm:20}},children:[(0,j.jsx)(f.A,{texto:"Publicar Prod"}),(0,j.jsxs)(s.Ay,{item:!0,xs:12,children:[(0,j.jsx)(l.A,{variant:"subtitle1",gutterBottom:!0,children:"Minimo 4 Imagenes (Max 9)"}),(0,j.jsx)("input",{accept:"image/*",id:"upload-images",multiple:!0,type:"file",style:{display:"none"},onChange:async e=>{const t=Array.from(e.target.files);if(t.length+F.length>9)return alert("You can upload up to 9 images only.");try{const e=await Promise.all(t.map((async e=>{console.log("Original: ".concat(e.name,", ").concat((e.size/1024).toFixed(2)," KB"));const t=await(0,b.w4)(e);return console.log("Compressed: ".concat(t.name,", ").concat((t.size/1024).toFixed(2)," KB")),t})));U((t=>[...t,...e]))}catch(n){console.error("Image compression failed:",n)}}}),(0,j.jsx)("label",{htmlFor:"upload-images",children:(0,j.jsx)(r.A,{color:"primary",component:"span",children:(0,j.jsx)(p.A,{})})}),(0,j.jsx)(o.A,{sx:{mt:2,display:"flex",flexWrap:"wrap",gap:2},children:F.map(((e,t)=>{const n=t===F.length-1;F.length;return(0,j.jsx)(o.A,{children:(0,j.jsx)(A,{file:e,sx:{border:n?"2px solid red":"none"},onRemove:()=>(e=>{U(F.filter(((t,n)=>n!==e)))})(t),index:t})},t)}))})]}),(0,j.jsxs)(o.A,{component:"form",onSubmit:async a=>{a.preventDefault(),R(!0);try{if(F.length<3)throw new Error("Cuidado!!!, Se necesitan al menos 3 im\xe1genes para continuar.");if(!$)throw new Error("Cuidado!!!, no haz seleccionado la subcategorias");if(!G)throw new Error("Cuidado!!!, no haz seleccionado un peso.");if((!se||0===se.length)&&(!K||0===K.length))throw new Error("Cuidado!!!, debes agregar al menos un color o un estilo para continuar.");const a=(0,g.H9)((0,g.rJ)(he,"productos")),o=a.id,r=ye();let i=await(async(t,a)=>{const o=je(e).toLowerCase().split(" ").filter((e=>e.length>=4)).slice(0,6),r={Titulo:e,Ttoken:o,Categoria:te,Genero:"Femenina",Subcategoria:$,Codigo:t,Precio:parseInt(1.3*n+1e3),Peso:G,Dimension:Q||"Paquete mediano",Detalles:H,Vistos:0,Vendedor:"y7eJBoQ23feGEF3HAF2sZxpDKig1",Fecha:a,Pais:ne};return r})(o,r);const s=await(async e=>{const t=[];try{for(let n=0;n<e.length;n++){const a=e[n];console.log(a,a.type);const o=(0,y.KR)(fe,"Imagenes/Productos/".concat(ye(),".jpeg"));await(0,y.D)(o,a);const r=await(0,y.qk)(o);t.push(r)}}catch(n){console.error("Error uploading images: ",n)}return t})(F),{principal:l,real:c,paquete:m,extraImages:d}=(e=>{if(e.length<3)throw new Error("Se necesitan al menos 3 im\xe1genes.");return{principal:e[0],extraImages:e.slice(1)}})(s);i.Imagen=l,await(0,g.BN)(a,i),d.length>0&&await(async(e,t)=>{for(const n of t){const t=(0,g.H9)((0,g.rJ)(he,"productos/".concat(e,"/imagenesExtra"))).id;await(0,g.BN)((0,g.H9)(he,"productos/".concat(e,"/imagenesExtra/").concat(t)),{id:t,url:n})}})(o,d),se.length>0&&await(async(e,t)=>{const n=[];for(const a of t){const t=(0,g.H9)((0,g.rJ)(he,"productos/".concat(e,"/colores"))).id,o={id:t,label:a};n.push(o),await(0,g.BN)((0,g.H9)(he,"productos/".concat(e,"/colores/").concat(t)),o)}return n})(o,se),K.length>0&&await(async(e,t,n)=>{const a=[];for(const o of t){const t=(0,g.H9)((0,g.rJ)(he,"productos/".concat(e,"/tallas"))).id,r={id:t,label:o,precio:parseInt(1.3*n[o]+1e3)||0};a.push(r),await(0,g.BN)((0,g.H9)(he,"productos/".concat(e,"/tallas/").concat(t)),r)}return a})(o,K,ce),R(!1),U([]),le([]),T([]),t(""),W(""),w(""),console.log(i),alert("Producto subido correctamente!")}catch(o){R(!1),console.error("Error al subir el producto:",o),alert("ERROR INESPERADO: "+o.message)}},sx:{padding:2,paddingTop:8},children:[(0,j.jsxs)("div",{style:{width:"100%",margin:10,padding:20,border:"2px solid #ccc",borderRadius:10,position:"relative",boxSizing:"border-box",backgroundColor:"#fff"},children:[(0,j.jsx)("span",{style:{position:"absolute",top:-12,left:20,backgroundColor:"#fff",padding:"0 8px",fontSize:16,fontWeight:"bold",color:"#333"},children:"Subcategorias"}),(0,j.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",width:"100%"},children:[{nombre:"Trajes",estimacion:{min:.8,max:1.4}},{nombre:"Vestidos",estimacion:{min:.5,max:1}},{nombre:"Camisas",estimacion:{min:.2,max:.5}},{nombre:"Bolsos",estimacion:{min:.3,max:.9}},{nombre:"Calzado",estimacion:{min:.6,max:1.2}},{nombre:"Faldas",estimacion:{min:.3,max:.7}},{nombre:"Pantalones",estimacion:{min:.3,max:.7}},{nombre:"Otros",estimacion:{min:.3,max:.7}},{nombre:"Ropa Interior",estimacion:{min:.3,max:.7}}].map((e=>(0,j.jsx)(c.A,{label:"".concat(e.nombre," Estimacion: ").concat(e.estimacion.min," - ").concat(e.estimacion.max," Kg"),style:{margin:5},clickable:!0,onClick:()=>(e=>{ee(G===e?null:e)})(e.nombre),color:$===e.nombre?"primary":"default"},e.nombre)))})]}),(0,j.jsxs)("div",{style:{width:"100%",margin:10,padding:20,border:"2px solid #ccc",borderRadius:10,position:"relative",boxSizing:"border-box",backgroundColor:"#fff"},children:[(0,j.jsx)("span",{style:{position:"absolute",top:-12,left:20,backgroundColor:"#fff",padding:"0 8px",fontSize:16,fontWeight:"bold",color:"#333"},children:"Pesos"}),(0,j.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",width:"100%"},children:[{nombre:"Ultraligero",min:.1,max:.5},{nombre:"Ligero",min:.51,max:1.1},{nombre:"Medio",min:1.2,max:2},{nombre:"Pesado",min:2.01,max:3.5},{nombre:"Muy pesado",min:3.51,max:4.5},{nombre:"Extremadamente pesado",min:4.51,max:6}].map((e=>(0,j.jsx)(c.A,{label:"min ".concat(e.min," - max ").concat(e.max," Kg"),style:{margin:5},clickable:!0,onClick:()=>(e=>{Y(G===e?null:e)})(e.nombre),color:G===e.nombre?"primary":"default"},e.nombre)))})]}),["Pesado","Muy pesado","Extremadamente pesado"].includes(G)&&(0,j.jsxs)("div",{style:{width:"100%",margin:10,padding:20,border:"2px solid #ccc",borderRadius:10,position:"relative",boxSizing:"border-box",backgroundColor:"#fff"},children:[(0,j.jsx)("span",{style:{position:"absolute",top:-12,left:20,backgroundColor:"#fff",padding:"0 8px",fontSize:16,fontWeight:"bold",color:"#333"},children:"Dimensiones"}),(0,j.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",width:"100%"},children:[{nombre:"Paquete peque\xf1o",min:.023,max:.03},{nombre:"Tama\xf1o personal",min:.031,max:.15},{nombre:"Paquete mediano",min:.151,max:.4},{nombre:"Paquete grande",min:.401,max:.8},{nombre:"Caja est\xe1ndar",min:.801,max:1.2},{nombre:"Caja extra grande",min:1.201,max:1.8},{nombre:"Carga pesada",min:1.801,max:2.2},{nombre:"Carga industrial",min:2.201,max:3}].map((e=>(0,j.jsx)(c.A,{label:"min ".concat(e.min," - max ").concat(e.max," cm\xb3"),style:{margin:5},clickable:!0,onClick:()=>(e=>{X(G===e?null:e)})(e.nombre),color:Q===e.nombre?"primary":"default"},e.nombre)))})]}),(0,j.jsxs)(s.Ay,{container:!0,spacing:2,children:[(0,j.jsx)(s.Ay,{item:!0,xs:12,children:(0,j.jsx)(m.A,{label:"Titulo",variant:"outlined",value:e,onChange:e=>t((0,b.Zr)(e.target.value)),required:!0,fullWidth:!0})}),(0,j.jsx)(s.Ay,{item:!0,xs:12,children:(0,j.jsx)(m.A,{label:"Precios",variant:"outlined",type:"number",value:n,onChange:e=>w(e.target.value),required:!0,fullWidth:!0,sx:{"& input::-webkit-outer-spin-button, & input::-webkit-inner-spin-button":{WebkitAppearance:"none",margin:0},"& input[type=number]":{MozAppearance:"textfield"}}})}),!1,(0,j.jsx)(s.Ay,{item:!0,xs:12,children:(0,j.jsx)(m.A,{label:"Detalles",variant:"outlined",multiline:!0,rows:4,value:H,onChange:e=>W(e.target.value),fullWidth:!0})}),(0,j.jsxs)(s.Ay,{item:!0,xs:12,children:[(0,j.jsxs)("div",{style:{margin:10},children:[(0,j.jsx)(d.A,{value:de,onChange:e=>ue(e.target.value),onKeyDown:e=>{"Enter"!==e.key&&","!==e.key||(e.preventDefault(),de.trim()&&(le([...se,(0,b.Zr)(de.trim())]),ue("")))},placeholder:"Introduzca Color"}),se.map(((e,t)=>(0,j.jsx)(c.A,{label:e,style:{margin:3},onDelete:()=>{return t=e,void le(se.filter((e=>e!==t)));var t}},t)))]}),(0,j.jsxs)("div",{style:{margin:10},children:[(0,j.jsx)(d.A,{value:pe,onChange:e=>xe(e.target.value),onKeyDown:e=>{"Enter"!==e.key&&","!==e.key||(e.preventDefault(),pe.trim()&&(T([...K,(0,b.Zr)(pe.trim())]),me({...ce,[(0,b.Zr)(pe.trim())]:""}),xe("")))},placeholder:"Introduzca Estilo"}),K.map(((e,t)=>(0,j.jsxs)(o.A,{display:"flex",alignItems:"center",marginY:1,children:[(0,j.jsx)(c.A,{label:e,style:{margin:3},onDelete:()=>(e=>{console.log("wettin"),T(K.filter((t=>t!==e)));const t={...ce};delete t[e],me(t)})(e)}),(0,j.jsx)(m.A,{label:"Price",type:"number",value:ce[e]||"",onChange:t=>((e,t)=>{me({...ce,[t]:e.target.value})})(t,e),sx:{"& input::-webkit-outer-spin-button, & input::-webkit-inner-spin-button":{WebkitAppearance:"none",margin:0},"& input[type=number]":{MozAppearance:"textfield"}}})]},t)))]})]}),(0,j.jsx)(s.Ay,{item:!0,xs:12,display:"flex",justifyContent:"center",alignItems:"center",children:(0,j.jsx)(u.A,{type:"submit",variant:"contained",color:"primary",children:"PUBLICAR PRODUCTO"})})]})]})]})]})}},7901:(e,t,n)=>{var a=n(4994);t.A=void 0;var o=a(n(9526)),r=n(4414);t.A=(0,o.default)((0,r.jsx)("path",{d:"M3 4V1h2v3h3v2H5v3H3V6H0V4zm3 6V7h3V4h7l1.83 2H21c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2V10zm7 9c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5m-3.2-5c0 1.77 1.43 3.2 3.2 3.2s3.2-1.43 3.2-3.2-1.43-3.2-3.2-3.2-3.2 1.43-3.2 3.2"}),"AddAPhoto")}}]);