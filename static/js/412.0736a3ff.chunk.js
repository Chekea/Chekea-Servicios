"use strict";(self.webpackChunkmy_react_appo=self.webpackChunkmy_react_appo||[]).push([[412],{9412:(e,t,a)=>{a.r(t),a.d(t,{default:()=>G});var o=a(9950),l=a(3464),n=a(33),c=a(8170),s=a(5308),r=a(9739),i=a(226),u=a(4857),d=a(6589),g=a(6491),x=a(2053),p=a(5277),m=a(5333),h=a(899),j=a(975),v=a(7324),y=a(6639),A=a(9694),C=a(9532),f=a(2578),b=(a(9751),a(6820),a(3849)),S=a(294),E=a(8429),k=a(2845),w=a(2675),P=a(4414);const R=e=>{let{isOpen:t,onClose:a,onConfirm:u}=e;const[d,g]=(0,o.useState)("");return(0,P.jsxs)(l.A,{open:t,onClose:a,children:[(0,P.jsx)(n.A,{children:"Introduzca Descuento"}),(0,P.jsx)(c.A,{children:(0,P.jsx)(s.A,{autoFocus:!0,margin:"dense",label:"Descuento en %",type:"number",fullWidth:!0,value:d,onChange:e=>g(e.target.value)})}),(0,P.jsxs)(r.A,{children:[(0,P.jsx)(i.A,{onClick:a,children:"Cancel"}),(0,P.jsx)(i.A,{onClick:()=>{d<90?u(d):alert("Ha ocurido un error"),a()},color:"primary",children:"Confirm"})]})]})},G=()=>{const[e,t]=(0,o.useState)(""),[a,l]=(0,o.useState)(""),[n,c]=(0,o.useState)(""),[r,G]=(0,o.useState)(""),[D,T]=(0,o.useState)(null),[K,I]=(0,o.useState)(""),[F,N]=(0,o.useState)(!1),[W,O]=(0,o.useState)(""),[U,q]=(0,o.useState)(!1),[B,J]=(0,o.useState)(""),[L,_]=(0,o.useState)([]),[z,Z]=(0,o.useState)("Aerea"),[H,Y]=(0,o.useState)([]),[M,V]=(0,o.useState)(!0),[$,Q]=(0,o.useState)([]),[X,ee]=(0,o.useState)([]),[te,ae]=(0,o.useState)([]),[oe,le]=(0,o.useState)([]),[ne,ce]=(0,o.useState)({}),[se,re]=(0,o.useState)(""),[ie,ue]=(0,o.useState)(""),[de,ge]=(0,o.useState)(""),xe=(0,f.C3)(S.A),pe=(0,u.A)(),me=(0,d.A)(pe.breakpoints.down("sm")),{codigo:he,contexto:je}=(0,E.g)(),[ve,ye]=(0,o.useState)(!1),[Ae,Ce]=(0,o.useState)(!1),[fe,be]=(0,o.useState)(!1),[Se,Ee]=(0,o.useState)(""),[ke,we]=(0,o.useState)(!1),[Pe,Re]=(0,o.useState)("color"),[Ge,De]=(0,o.useState)(null),[Te,Ke]=(0,o.useState)(""),[Ie,Fe]=(0,o.useState)(""),Ne=((0,E.Zp)(),(0,b.aU)(S.A)),We=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var a,o,l;(Re(e),De(t),t)?"talla"===e?(Ke(null!==(a=t.label)&&void 0!==a?a:""),Fe(null!==(o=t.price)&&void 0!==o?o:0)):(Ke(null!==(l=t.label)&&void 0!==l?l:""),Fe("")):(Ke(""),Fe(""));we(!0)};console.log(he);const[Oe,Ue]=(0,o.useState)(null),qe=()=>{Ce(!1)},Be=e=>"Guinea Ecuatorial"===e?"Nacional":"Exterior",Je=async e=>{let t=parseInt(e),a=Be(D.Pais);const o=(0,f.KR)(xe,"GE/".concat(a,"/Prod/").concat(he));try{if(console.log(e,"existe"),await(0,f.yo)(o,{Descuento:t}),t>0){(0,f.KR)(xe,"GE/Rebajas/".concat(he));const e=(0,f.KR)(xe,"GE/Filtros/".concat(a,"/").concat(D.Categoria,"/").concat(he));(0,f.KR)(xe,"GE/".concat(a,"/Prod/").concat(he));await(0,f.yo)(e,{Descuento:t})}else{const e=(0,f.KR)(xe,"GE/Rebajas/".concat(he)),o=(0,f.KR)(xe,"Filtros/".concat(a,"/").concat(D.Categoria,"/").concat(he));await(0,f.yo)(o,{Descuento:t}),await(0,f.TF)(e)}console.log("Data updated successfully")}catch(l){console.error("Error updating data: ",l)}};(0,o.useEffect)((()=>((async e=>{try{var a,o,n,c,s;const r=(0,b.H9)(Ne,"productos",e),i=await(0,b.x7)(r);if(!i.exists())return console.log("\u274c No existe el documento del producto:",e),T(null),ae([]),void Q([]);const u=i.data();T(u),t(null!==(a=u.Titulo)&&void 0!==a?a:""),O(null!==(o=u.Ubicacion)&&void 0!==o?o:""),l(null!==(n=u.Precio)&&void 0!==n?n:""),J(null!==(c=u.Detalles)&&void 0!==c?c:""),N(null!==(s=u.Stock)&&void 0!==s?s:""),console.log("Producto Data:",u);const d=(0,b.rJ)(Ne,"productos",e,"colores"),g=(0,b.rJ)(Ne,"productos",e,"tallas"),[x,p]=await Promise.all([(0,b.GG)(d),(0,b.GG)(g)]),m=x.docs.map((e=>e.data())),h=p.docs.map((e=>e.data()));console.log("Colores:",m),Q(m||[]),ae(h||[])}catch(r){console.error("\u274c Error al obtener datos:",r)}})(he),()=>{})),[]);const Le=async(e,t,a)=>{const o=(0,f.P)((0,f.KR)(xe,"GE/".concat(je,"/Prod/").concat(he,"/").concat(t)),(0,f.kT)("label"),(0,f.iz)(e));if("Eliminar"===a){const e=await(0,f.Jt)(o);if(e.exists()){let a;e.forEach((e=>{a=e.key})),console.log("Key:",a);const o=(0,f.KR)(xe,"GE/".concat(je,"/Prod/").concat(he,"/").concat(t,"/").concat(a));await(0,f.TF)(o),console.log("Node deleted successfully.")}}else try{(await(0,f.Jt)(o)).exists()||(console.log("ENTRAMOS",e,t),_e(e,t))}catch(l){return console.error("Error checking value existence in the database:",l),!1}},_e=async(e,t)=>{let o=Be(D.Pais);const l=(0,f.VC)((0,f.KR)(xe,"GE/".concat(o,"/Prod/").concat(he,"/").concat(t))).key,n="GE/".concat(o,"/Prod/").concat(he,"/").concat(t,"/").concat(l);if("Color"===t)await(0,f.hZ)((0,f.KR)(xe,n),{label:e,codigo:l}),console.log({label:e,codigo:l});else{console.log({label:e,precio:parseInt(""===ne[e]?a:ne[e]),codigo:l});const t=parseInt(""===ne[e]?a:ne[e],10);await(0,f.hZ)((0,f.KR)(xe,l),{label:e,precio:t,codigo:l})}};return(0,P.jsxs)(g.A,{component:"form",onSubmit:async t=>{t.preventDefault();const o={...D,Titulo:e,Ubicacion:W,Precio:parseFloat(a),Cantidad:parseInt(K),Detalles:B,Stock:"Nacional"===je?F:D.Stock,Espacio:"Exterior"===je?parseFloat(r):0,Dimension:void 0!==n?parseFloat(n):parseFloat(1.5)},l=(0,f.KR)(xe,"GE/".concat(je,"/Prod/").concat(he)),c=(0,f.KR)(xe,"GE/Filtros/".concat(je,"/").concat(D.Categoria,"/").concat(he));await(0,f.yo)(l,o),await(0,f.yo)(c,o);for(const e of $)Le(e,"Color","");for(const e in ne)ne.hasOwnProperty(e)&&Le(e,"Talla","");console.log(o.Categoria,D)},sx:{mt:2,padding:2},children:[(0,P.jsx)(k.A,{texto:"Editar"}),(0,P.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",marginTop:me?40:0},children:(0,P.jsx)(i.A,{variant:"contained",color:"info",onClick:()=>{ye(!0)},children:"APLICAR DESCUENTO"})}),(0,P.jsxs)("div",{style:{margin:10},children:[(0,P.jsx)(x.A,{variant:"subtitle1",gutterBottom:!0,children:"Colores"}),$.map(((e,t)=>(0,P.jsx)(p.A,{label:e.label,style:{margin:3},onClick:()=>We("color",e),onDelete:()=>{return Ee(t=e),be("Color"),Ce(!0),void Q($.filter((e=>e!==t)));var t}},t))),(0,P.jsx)(m.A,{color:"primary",onClick:()=>We("color"),children:(0,P.jsx)(C.A,{})})]}),(0,P.jsxs)("div",{style:{margin:10},children:[(0,P.jsx)(x.A,{variant:"subtitle1",gutterBottom:!0,children:"Tallas"}),te.map(((e,t)=>(0,P.jsx)(p.A,{label:"".concat(e.label," : $").concat(e.precio),style:{margin:3},onClick:()=>We("talla",e),onDelete:()=>(e=>{Ce(!0);const t=e.split(":");Ee(t[0]),be("Talla"),ae(te.filter((t=>t!==e)))})(e)}))),(0,P.jsx)(m.A,{color:"primary",onClick:()=>We("talla"),children:(0,P.jsx)(C.A,{})})]}),oe.map(((e,t)=>(0,P.jsx)(g.A,{display:"flex",alignItems:"center",marginY:me?1:5,children:(0,P.jsx)(p.A,{label:e,style:{margin:3},onDelete:()=>(e=>{console.log("wettin"),le(oe.filter((t=>t!==e)));const t={...ne};delete t[e],ce(t)})(e)})},t))),(0,P.jsxs)(h.Ay,{container:!0,spacing:2,marginTop:me?5:0,children:[(0,P.jsx)(h.Ay,{item:!0,xs:12,children:(0,P.jsx)(s.A,{label:"Title",variant:"outlined",value:e,onChange:e=>t(e.target.value),required:!0,fullWidth:!0})}),(0,P.jsx)(h.Ay,{item:!0,xs:12,children:(0,P.jsx)(s.A,{label:"Price",variant:"outlined",type:"number",value:a,onChange:e=>l(e.target.value),required:!0,fullWidth:!0})}),"Nacional"===je&&(0,P.jsxs)(g.A,{display:"flex",alignItems:"flex-end",marginY:1,margin:1,children:[(0,P.jsx)(s.A,{label:"Cantidad",type:"number",value:K,onChange:e=>I(e.target.value),style:{marginLeft:"8px"}}),(0,P.jsx)("div",{style:{margin:10,marginLeft:30},children:(0,P.jsx)(j.A,{control:(0,P.jsx)(v.A,{checked:F,onChange:e=>{N(e.target.checked)}}),label:"Stock"})})]}),(0,P.jsx)(h.Ay,{item:!0,xs:12,children:(0,P.jsx)(s.A,{label:"Details",variant:"outlined",multiline:!0,rows:4,value:B,onChange:e=>J(e.target.value),required:!0,fullWidth:!0})}),(0,P.jsx)("div",{style:{display:"flex",alignContent:"center",alignItems:"center"},children:(0,P.jsx)(i.A,{type:"submit",variant:"contained",color:"primary",children:U?(0,P.jsx)(y.A,{color:"warning",size:24}):"PUBLICAR"})})]}),Oe&&(0,P.jsxs)("p",{children:["Entered number: ",Oe]}),(0,P.jsx)(R,{isOpen:ve,onClose:()=>{ye(!1)},onConfirm:e=>{Ue(e),Je(e),console.log("Confirmed value:",e)}}),(0,P.jsx)(w.A,{open:Ae,message:"Seguro que desea borrar este valor?",onClose:qe,onConfirm:()=>{Le(Se,fe,"Eliminar"),qe()}}),(0,P.jsx)(A.Ay,{anchor:"right",open:ke,onClose:()=>we(!1),children:(0,P.jsxs)(g.A,{sx:{width:300,padding:2},children:[(0,P.jsx)(x.A,{variant:"h6",gutterBottom:!0,children:"color"===Pe?"Nuevo Color":"Nueva Talla"}),(0,P.jsx)(s.A,{label:"color"===Pe?"Color":"Talla",value:Te,onChange:e=>Ke(e.target.value),fullWidth:!0,margin:"normal"}),"talla"===Pe&&(0,P.jsx)(s.A,{label:"Precio",type:"number",value:Ie,onChange:e=>Fe(e.target.value),fullWidth:!0,margin:"normal"}),(0,P.jsx)(i.A,{variant:"contained",color:"primary",onClick:()=>{if(Te){if("color"===Pe)Q(Ge?e=>e.map((e=>e===Ge?{label:Te}:e)):e=>[...e,{label:Te}]);else{const e={label:Te,price:Ie||0};ae(Ge?e=>e.map((e=>e.id===Ge.id?{...e,label:Te,precio:Ie}:e)):t=>[...t,e])}De(null),Ke(""),Fe(""),we(!1)}},sx:{mt:2},fullWidth:!0,children:"Guardar"})]})})]})}}}]);