"use strict";(self.webpackChunkmy_react_appo=self.webpackChunkmy_react_appo||[]).push([[291],{1291:(e,o,a)=>{a.r(o),a.d(o,{default:()=>C});var t=a(9950),n=a(6491),r=a(5333),s=a(6639),i=a(899),l=a(2053),c=a(5277),d=a(5308),u=a(9890),m=a(226),p=a(7901),g=a(2578),x=a(3849),b=a(1975),h=a(294),f=a(2845),y=a(9751),j=a(8429),A=a(4414);const w=[{nombre:"Moda & Accesorios",subcategorias:["Trajes","Faldas","Vestidos","Bolsos","Pantalones","Calzado","Camisas","Otros"]},{nombre:"Complementos para peques",subcategorias:["Beb\xe9s","Ni\xf1os","Juguetes","Moda","Otros"]},{nombre:"Deporte",subcategorias:["Ropa","Calzado","Otros","Gimnasio"]},{nombre:"Electr\xf3nica",subcategorias:["Drones","Tablets","Electrodomesticos","Camaras"]},{nombre:"Muebles",subcategorias:["Sofas","Mesas","Sillas","Armarios","Camas"]},{nombre:"Transporte",subcategorias:["Patin","Scooter","Deportivas"]},{nombre:"Belleza & Accesorios",subcategorias:["Maquillaje","Pelo","Joyas","Otros"]},{nombre:"Hogar",subcategorias:["Otros","Cocina","Sala de estar","Ba\xf1o","Decoraci\xf3n","Iluminacion"]},{nombre:"Otros",subcategorias:["Auriculares","Smartwatch","Otros"]}],v=e=>{let{file:o,onRemove:a,index:s,sx:i}=e;const[l,c]=(0,t.useState)("");return(0,t.useEffect)((()=>{if(o){const e=URL.createObjectURL(o);return c(e),()=>{URL.revokeObjectURL(e)}}}),[o]),(0,A.jsx)(n.A,{sx:{position:"relative",display:"inline-block"},children:o?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("img",{src:l,alt:"Preview",style:{maxWidth:"100px",maxHeight:"100px"}}),(0,A.jsx)(r.A,{color:"error",size:"small",onClick:()=>a(o),sx:{position:"absolute",top:0,right:0},children:"\xd7"})]}):(0,A.jsx)(n.A,{sx:{width:"100px",height:"100px",border:"1px dashed gray",display:"flex",alignItems:"center",justifyContent:"center",color:"gray"},children:s+1})})},C=()=>{var e;const[o,a]=(0,t.useState)(""),[C,S]=(0,t.useState)(""),k=(null===(e=(0,j.zy)().state)||void 0===e?void 0:e.userName)||"";console.log(k);const[z,P]=(0,t.useState)(""),[E,D]=(0,t.useState)(""),[I,M]=(0,t.useState)(0),[R,B]=(0,t.useState)(""),[H,W]=(0,t.useState)(!1),[O,q]=(0,t.useState)(""),[T,N]=(0,t.useState)([]),[U,V]=(0,t.useState)("Aerea"),[F,L]=(0,t.useState)(null),[J,K]=(0,t.useState)(null),[Z,_]=(0,t.useState)([]),[G,Y]=(0,t.useState)(!0),[Q,X]=(0,t.useState)(null),[$,ee]=(0,t.useState)(null),[oe,ae]=(0,t.useState)(null),[te,ne]=(0,t.useState)(null),[re,se]=(0,t.useState)(null),[ie,le]=(0,t.useState)(null),ce=e=>e<=7e3?1.3*e+1500:e<=25e3?1.22*e+1e3:e<=25e4?1.15*e:e<=5e5?1.12*e:1.08*e+1e5;let de="Moda & Accesorios",ue="China";console.log("eiby bielo");const[me,pe]=(0,t.useState)([]),[ge,xe]=(0,t.useState)([]);console.log(de);const[be,he]=(0,t.useState)([]),[fe,ye]=(0,t.useState)({}),[je,Ae]=(0,t.useState)(""),[we,ve]=(0,t.useState)(""),[Ce,Se]=(0,t.useState)(""),ke=((0,g.C3)(h.A),(0,x.aU)(h.A));const ze=(0,y.c7)(h.A),Pe=w.find((e=>e.nombre===re));(0,g.C3)(h.A),(0,x.aU)(h.A);const Ee=()=>Date.now();function De(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s]/gi,"")}console.log("hola mundo cruel");const[Ie,Me]=(0,t.useState)([]);return(0,A.jsxs)(A.Fragment,{children:[H&&(0,A.jsx)(n.A,{sx:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",bgcolor:"rgba(0,0,0,0.4)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:9999},children:(0,A.jsx)(s.A,{size:60,color:"primary"})}),(0,A.jsxs)(n.A,{sx:{paddingTop:{xs:10,sm:20}},children:[(0,A.jsx)(f.A,{texto:"Publicar Prod"}),(0,A.jsxs)(i.Ay,{item:!0,xs:12,children:[(0,A.jsx)(l.A,{variant:"subtitle1",gutterBottom:!0,children:"Minimo 4 Imagenes (Max 9)"}),(0,A.jsx)("input",{accept:"image/*",id:"upload-images",multiple:!0,type:"file",style:{display:"none"},onChange:async e=>{const o=Array.from(e.target.files);if(o.length+T.length>9)return alert("You can upload up to 9 images only.");try{const e=await Promise.all(o.map((async e=>{console.log("Original: ".concat(e.name,", ").concat((e.size/1024).toFixed(2)," KB"));const o=await(0,b.w4)(e);return console.log("Compressed: ".concat(o.name,", ").concat((o.size/1024).toFixed(2)," KB")),o})));N((o=>[...o,...e]))}catch(a){console.error("Image compression failed:",a)}}}),(0,A.jsx)("label",{htmlFor:"upload-images",children:(0,A.jsx)(r.A,{color:"primary",component:"span",children:(0,A.jsx)(p.A,{})})}),(0,A.jsx)(n.A,{sx:{mt:2,display:"flex",flexWrap:"wrap",gap:2},children:T.map(((e,o)=>{const a=o===T.length-1;T.length;return(0,A.jsx)(n.A,{children:(0,A.jsx)(v,{file:e,sx:{border:a?"2px solid red":"none"},onRemove:()=>(e=>{N(T.filter(((o,a)=>a!==e)))})(o),index:o})},o)}))})]}),(0,A.jsxs)(n.A,{component:"form",onSubmit:async e=>{e.preventDefault(),W(!0);try{if("Pelo"===te){if(0===T.length)throw new Error("Cuidado!!!, Se necesitan al menos 1 im\xe1gen para continuar.")}else if(T.length<3)throw new Error("Cuidado!!!, Se necesitan al menos 3 im\xe1genes para continuar.");if(!te)throw new Error("Cuidado!!!, no haz seleccionado la subcategorias");if(!$)throw new Error("Cuidado!!!, no haz seleccionado un peso.");if((!be||0===be.length)&&(!Z||0===Z.length))throw new Error("Cuidado!!!, debes agregar al menos un color o un estilo para continuar.");const e=(0,x.H9)((0,x.rJ)(ke,"productos")),t=e.id,n=Ee();let r=await(async(e,a)=>{const t=De(o).toLowerCase().split(" ").filter((e=>e.length>=4)).slice(0,6),n={Titulo:o,Ttoken:t,Categoria:re,Subcategoria:te,Codigo:e,Precio:parseInt(ce(C)),Peso:$,Dimension:oe||"Paquete mediano",Detalles:O,Vistos:0,Vendedor:k,Fecha:a,Pais:ue};return"Moda & Accesorios"==te&&(n.Genero=ie),n})(t,n);const s=await(async e=>{const o=[];try{for(let a=0;a<e.length;a++){const t=e[a];console.log(t,t.type);const n=(0,y.KR)(ze,"Imagenes/Productos/".concat(Ee(),".jpeg"));await(0,y.D)(n,t);const r=await(0,y.qk)(n);o.push(r)}}catch(a){console.error("Error uploading images: ",a)}return o})(T),{principal:i,real:l,paquete:c,extraImages:d}=(e=>{if(!Array.isArray(e)||0===e.length)throw new Error("Debes proporcionar al menos una imagen.");return 1===e.length?{principal:e,extraImages:e}:{principal:e[0],extraImages:e.slice(1)}})(s);r.Imagen=i,await(0,x.BN)(e,r),d.length>0&&await(async(e,o)=>{for(const a of o){const o=(0,x.H9)((0,x.rJ)(ke,"productos/".concat(e,"/imagenes"))).id;await(0,x.BN)((0,x.H9)(ke,"productos/".concat(e,"/imagenes/").concat(o)),{id:o,url:a})}})(t,d),be.length>0&&await(async(e,o)=>{const a=[];for(const t of o){const o=(0,x.H9)((0,x.rJ)(ke,"productos/".concat(e,"/colores"))).id,n={id:o,label:t};a.push(n),await(0,x.BN)((0,x.H9)(ke,"productos/".concat(e,"/colores/").concat(o)),n)}return a})(t,be),Z.length>0&&await(async(e,o,a)=>{const t=[];for(const n of o){const o=(0,x.H9)((0,x.rJ)(ke,"productos/".concat(e,"/tallas"))).id,r={id:o,label:n,precio:a[n]>0?parseInt(ce(a[n])):0};t.push(r),await(0,x.BN)((0,x.H9)(ke,"productos/".concat(e,"/tallas/").concat(o)),r)}return t})(t,Z,fe),await async function(e){try{const o={1:"Asly","01":"Maysa","001":"Vicky",11:"Esteban"}[e];if(!o)return void console.log("Usuario no v\xe1lido");const a=(0,x.H9)(ke,"GE_Info","Nombres"),t=await(0,x.x7)(a);if(t.exists()){const e=(t.data()[o]||0)+1;await(0,x.mZ)(a,{[o]:e}),console.log("\u2705 ".concat(o," actualizado a ").concat(e))}else console.log("El documento 'Nombres' no existe.")}catch(o){console.error("\u274c Error al actualizar contador:",o)}}(k),W(!1),N([]),he([]),_([]),a(""),q(""),S(""),console.log(r),alert("Producto subido correctamente!")}catch(t){W(!1),console.error("Error al subir el producto:",t),alert("ERROR INESPERADO: "+t.message)}},sx:{padding:2,paddingTop:8},children:[(0,A.jsxs)("div",{style:{width:"100%",padding:20},children:[(0,A.jsx)("h2",{style:{textAlign:"center"},children:"Categor\xedas"}),(0,A.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",marginBottom:20},children:function(e){const o=e.trim().toLowerCase(),a={"01":["Moda & Accesorios","Complementos para peques"],1:["Belleza & Accesorios","Deporte"],"001":["Hogar","Otros"],11:["Electr\xf3nica","Muebles","Transporte"]};return a[o]?w.filter((e=>a[o].includes(e.nombre))):[]}(k).map((e=>(0,A.jsx)(c.A,{label:e.nombre,clickable:!0,onClick:()=>{return o=e.nombre,se((e=>e===o?null:o)),console.log(te,"heis"),void ne(null);var o},color:re===e.nombre?"primary":"default",style:{margin:5,fontSize:14}},e.nombre)))}),Pe&&(0,A.jsxs)("div",{style:{width:"100%",margin:10,padding:20,border:"2px solid #ccc",borderRadius:10,position:"relative",boxSizing:"border-box",backgroundColor:"#fff"},children:[(0,A.jsxs)("span",{style:{position:"absolute",top:-12,left:20,backgroundColor:"#fff",padding:"0 8px",fontSize:16,fontWeight:"bold",color:"#333"},children:["Subcategor\xedas de ",Pe.nombre]}),(0,A.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",width:"100%"},children:Pe.subcategorias.map((e=>(0,A.jsx)(c.A,{label:e,style:{margin:5},onClick:()=>(e=>{ne((o=>o===e?null:e))})(e),color:te===e?"primary":"default",clickable:!0},e)))})]})]}),"Moda & Accesorios"===(null===Pe||void 0===Pe?void 0:Pe.nombre)&&(0,A.jsxs)("div",{style:{width:"100%",margin:10,padding:20,border:"2px solid #ccc",borderRadius:10,position:"relative",boxSizing:"border-box",backgroundColor:"#fff"},children:[(0,A.jsx)("span",{style:{position:"absolute",top:-12,left:20,backgroundColor:"#fff",padding:"0 8px",fontSize:16,fontWeight:"bold",color:"#333"},children:"G\xe9nero"}),(0,A.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",width:"100%"},children:["Femenina","Masculina"].map((e=>(0,A.jsx)(c.A,{label:e,style:{margin:5},clickable:!0,color:ie===e?"primary":"default",onClick:()=>le(e)},e)))})]}),(0,A.jsxs)("div",{style:{width:"100%",margin:10,padding:20,border:"2px solid #ccc",borderRadius:10,position:"relative",boxSizing:"border-box",backgroundColor:"#fff"},children:[(0,A.jsx)("span",{style:{position:"absolute",top:-12,left:20,backgroundColor:"#fff",padding:"0 8px",fontSize:16,fontWeight:"bold",color:"#333"},children:"Pesos"}),(0,A.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",width:"100%"},children:[{nombre:"Ultraligero",min:.1,max:.5},{nombre:"Ligero",min:.51,max:1.1},{nombre:"Medio",min:1.2,max:2},{nombre:"Pesado",min:2.01,max:3.5},{nombre:"Muy pesado",min:3.51,max:4.5},{nombre:"Extremadamente pesado",min:4.51,max:6},{nombre:"Solo Barco",min:7,max:7}].map((e=>(0,A.jsx)(c.A,{label:7==e.min?"Solo Barco":"min ".concat(e.min," - max ").concat(e.max," Kg"),style:{margin:5},clickable:!0,onClick:()=>(e=>{ee((o=>o===e?null:e))})(e.nombre),color:$===e.nombre?"primary":"default"},e.nombre)))})]}),["Pesado","Muy pesado","Extremadamente pesado","Solo Barco"].includes($)&&(0,A.jsxs)("div",{style:{width:"100%",margin:10,padding:20,border:"2px solid #ccc",borderRadius:10,position:"relative",boxSizing:"border-box",backgroundColor:"#fff"},children:[(0,A.jsx)("span",{style:{position:"absolute",top:-12,left:20,backgroundColor:"#fff",padding:"0 8px",fontSize:16,fontWeight:"bold",color:"#333"},children:"Dimensiones"}),(0,A.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",width:"100%"},children:[{nombre:"Paquete peque\xf1o",min:.023,max:.03},{nombre:"Tama\xf1o personal",min:.031,max:.15},{nombre:"Paquete mediano",min:.151,max:.4},{nombre:"Paquete grande",min:.401,max:.8},{nombre:"Caja est\xe1ndar",min:.801,max:1.2},{nombre:"Caja extra grande",min:1.201,max:1.8},{nombre:"Carga pesada",min:1.801,max:2.2},{nombre:"Carga industrial",min:2.201,max:3}].map((e=>(0,A.jsx)(c.A,{label:"min ".concat(e.min," - max ").concat(e.max," cm\xb3"),style:{margin:5},clickable:!0,onClick:()=>(e=>{ae($===e?null:e)})(e.nombre),color:oe===e.nombre?"primary":"default"},e.nombre)))})]}),(0,A.jsxs)(i.Ay,{container:!0,spacing:2,children:[(0,A.jsx)(i.Ay,{item:!0,xs:12,children:(0,A.jsx)(d.A,{label:"Titulo",variant:"outlined",value:o,onChange:e=>a((0,b.Zr)(e.target.value)),required:!0,fullWidth:!0})}),(0,A.jsx)(i.Ay,{item:!0,xs:12,children:(0,A.jsx)(d.A,{label:"Precios",variant:"outlined",type:"number",value:C,onChange:e=>S(e.target.value),required:!0,fullWidth:!0,sx:{"& input::-webkit-outer-spin-button, & input::-webkit-inner-spin-button":{WebkitAppearance:"none",margin:0},"& input[type=number]":{MozAppearance:"textfield"}}})}),!1,(0,A.jsx)(i.Ay,{item:!0,xs:12,children:(0,A.jsx)(d.A,{label:"Detalles",variant:"outlined",multiline:!0,rows:4,value:O,onChange:e=>q(e.target.value),fullWidth:!0})}),(0,A.jsxs)(i.Ay,{item:!0,xs:12,children:[(0,A.jsxs)("div",{style:{margin:10},children:[(0,A.jsx)(u.A,{value:je,onChange:e=>Ae(e.target.value),onKeyDown:e=>{"Enter"!==e.key&&","!==e.key||(e.preventDefault(),je.trim()&&(he([...be,(0,b.Zr)(je.trim())]),Ae("")))},placeholder:"Introduzca Color"}),be.map(((e,o)=>(0,A.jsx)(c.A,{label:e,style:{margin:3},onDelete:()=>{return o=e,void he(be.filter((e=>e!==o)));var o}},o)))]}),(0,A.jsxs)("div",{style:{margin:10},children:[(0,A.jsx)(u.A,{value:we,onChange:e=>ve(e.target.value),onKeyDown:e=>{"Enter"!==e.key&&","!==e.key||(e.preventDefault(),we.trim()&&(_([...Z,(0,b.Zr)(we.trim())]),ye({...fe,[(0,b.Zr)(we.trim())]:""}),ve("")))},placeholder:"Introduzca Estilo"}),Z.map(((e,o)=>(0,A.jsxs)(n.A,{display:"flex",alignItems:"center",marginY:1,children:[(0,A.jsx)(c.A,{label:e,style:{margin:3},onDelete:()=>(e=>{console.log("wettin"),_(Z.filter((o=>o!==e)));const o={...fe};delete o[e],ye(o)})(e)}),(0,A.jsx)(d.A,{label:"Price",type:"number",value:fe[e]||"",onChange:o=>((e,o)=>{ye({...fe,[o]:e.target.value})})(o,e),sx:{"& input::-webkit-outer-spin-button, & input::-webkit-inner-spin-button":{WebkitAppearance:"none",margin:0},"& input[type=number]":{MozAppearance:"textfield"}}})]},o)))]})]}),(0,A.jsx)(i.Ay,{item:!0,xs:12,display:"flex",justifyContent:"center",alignItems:"center",children:(0,A.jsx)(m.A,{type:"submit",variant:"contained",color:"primary",children:"PUBLICAR PRODUCTO"})})]})]})]})]})}},7901:(e,o,a)=>{var t=a(4994);o.A=void 0;var n=t(a(9526)),r=a(4414);o.A=(0,n.default)((0,r.jsx)("path",{d:"M3 4V1h2v3h3v2H5v3H3V6H0V4zm3 6V7h3V4h7l1.83 2H21c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2V10zm7 9c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5m-3.2-5c0 1.77 1.43 3.2 3.2 3.2s3.2-1.43 3.2-3.2-1.43-3.2-3.2-3.2-3.2 1.43-3.2 3.2"}),"AddAPhoto")}}]);