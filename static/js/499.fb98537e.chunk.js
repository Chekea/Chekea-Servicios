(self.webpackChunkmy_react_appo=self.webpackChunkmy_react_appo||[]).push([[499],{9499:(e,o,t)=>{"use strict";t.r(o),t.d(o,{default:()=>b});var n=t(9950),r=t(4857),a=t(6589),i=t(899),c=t(6491),s=t(2053),l=t(226),d=t(7938),p=t(8429),u=t(2578),y=t(6639),m=t(294),f=t(2675),x=t(6641),h=t(1975),g=(t(5189),t(2845)),C=t(9246),v=t(4414);const b=()=>{const[e,o]=(0,n.useState)(!0),[t,b]=(0,n.useState)(""),[j,E]=(0,n.useState)("Seguro que ya se envio ese producto?"),[A,R]=(0,n.useState)(!0),[w,O]=(0,n.useState)([]),[S,k]=(0,n.useState)(null),[P,I]=(0,n.useState)([]),[D,T]=(0,n.useState)(null),G=(0,r.A)(),M=(0,u.C3)(m.A),_=(0,a.A)(G.breakpoints.down("sm")),{codigo:B,contexto:N}=(0,p.g)(),[U,F]=(0,n.useState)(!1),V=()=>{const e="Buenas, se necesita verificacion para que Chekea envie su compra ".concat(A.CompraId," , basta con responder con un OK"),o="whatsapp://send?phone=".concat("+8613212074721","&text=").concat(encodeURIComponent(e));if(/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)){const e=document.createElement("a");e.href=o,e.style.display="none",document.body.appendChild(e),e.click(),setTimeout((()=>{document.body.removeChild(e)}),500)}else alert("Please use a mobile device to send the WhatsApp message.")},J=(e,o)=>{F(!0),b(o),"Enviado"===o?k({...e,Estado:"Enviado",Envio:(new Date).getTime()}):(E("Seguro que el producto de codigo ".concat((0,h.o6)(String(A.CompraId))," ya fue retirado?\n\n PORFAVOR ASEGURESE!!!")),k({...e,Estado:"Retirado",Retiro:(new Date).getTime()}))},W=()=>{F(!1)},q=async(e,o,t)=>{try{const{Servidor:n}=await(0,x.JJ)("GE/Info"),r=await C.A.get("".concat(n,"/notification"),{params:{token:e,titulo:o,texto:t}});console.log("Response:",r.data)}catch(n){console.error("Error fetching notification:",n)}};(0,n.useEffect)((()=>{console.log("Estado final en el componente:",S,A)}),[S]);const K=e=>{F(!0)};console.log(A.Imagen,"hay o no"),(0,n.useEffect)((()=>((()=>{o(!0);const e=(0,u.KR)(M,"GE/Compras/".concat(N,"/").concat(B));(0,u.Zy)(e,(e=>{R(e.val());const t=Object.values(e.val().Productos);O(t),o(!1)}))})(),()=>{})),[]);const[L,Z]=(0,n.useState)(!1);(0,n.useEffect)((()=>{if(!L&&0!==w.length){const e=(e,o)=>{console.log(A.Estado,"entar");let t="Comprado"===A.Estado||"Verificando..."===A.Estado?"Verificando":A.Estado;const n=(0,u.KR)(M,"GE/Comprador/".concat(e,"/MisCompras/").concat(t,"/").concat(o));(0,u.Jt)(n).then((e=>{e.exists()?(console.log(e.val(),"hold man"),I((o=>[...o,e.val()])),console.log(e.val()),Z(!0)):console.log("No data available")})).catch((e=>{console.error("Error fetching data:",e)}))};w.forEach((o=>{const t=o.id,n=A.Comprador;e(n,t)}))}return()=>{}}),[w,L]);const[z,H]=(0,n.useState)(""),[X,Q]=(0,n.useState)(!1);(0,p.Zp)();return(0,v.jsxs)("div",{children:[e?(0,v.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:(0,v.jsx)(y.A,{})}):(0,v.jsxs)("div",{style:{paddingTop:"10px"},children:[(0,v.jsx)(f.A,{open:U,message:j,onClose:W,onConfirm:async()=>{const{token:e}=await(0,x.JJ)("GE/Token/".concat(A.Comprador));console.log("Estado final en el componente:",S,A);const{Compras:o}=await(0,x.JJ)("GE/Exterior/Prod/".concat(S.Producto));switch(console.log(e,o,"hola"),t){case"Enviado":(0,x.Cy)("GE/Comprador/".concat(A.Comprador,"/MisCompras/Verificando/").concat(S.Codigo)).then((()=>{(0,x.C1)(S,"GE/Comprador/".concat(A.Comprador,"/MisCompras/Enviado/").concat(S.Codigo)).then((()=>{(0,x.A0)({Estado:"Enviado"},"GE/Compras/".concat(S.contexto,"/").concat(B)),(0,x.A0)({Compras:o+1},"GE/Exterior/Prod/".concat(S.Producto,"/")),q(e,"Producto Enviado","Producto ha sido enviado satisfactoriamente")}))})).catch((e=>{console.error("Error deleting node:",e)}));break;case"Comprado":(0,x.A0)({Estado:"Comprado"},"GE/Comprador/".concat(A.Comprador,"/MisCompras/Verificando/").concat(S.Codigo)).then((()=>{(0,x.A0)({Estado:"Comprado"},"GE/Compras/Exterior/".concat(B)),q(e,"Producto Comprado","Producto a esperas de ser enviado")}));break;case"Error":(0,x.Cy)("GE/Comprador/".concat(A.Comprador,"/MisCompras/Verificando/").concat(S.Codigo)).then((()=>{(0,x.C1)(S,"GE/Comprador/".concat(A.Comprador,"/MisCompras/Error/").concat(S.Codigo)).then((()=>{(0,x.A0)({Estado:"Error"},"GE/Compras/Exterior/".concat(B)),q(e,"Error de Compra","Contacte a atencion al cliente")}))})).catch((e=>{console.error("Error deleting node:",e)}));break;case"Retirado":(0,x.Cy)("GE/Comprador/".concat(A.Comprador,"/MisCompras/Enviado/").concat(S.Codigo)).then((()=>{(0,x.C1)(S,"GE/Comprador/".concat(A.Comprador,"/MisCompras/Retirado/").concat(S.Codigo)),(0,x.A0)({Estado:"Retirado"},"GE/Compras/".concat(S.contexto,"/").concat(B))})).catch((e=>{console.error("Error deleting node:",e)}));break;default:console.log("ninguno")}W()}}),(0,v.jsx)(i.Ay,{container:!0,children:_?(0,v.jsxs)("div",{children:[(0,v.jsx)(g.A,{texto:"Detalles"}),(0,v.jsx)(c.A,{sx:{display:"flex",paddingTop:5,justifyContent:"center"},children:(0,v.jsxs)(i.Ay,{item:!0,xs:10,children:[(0,v.jsx)("h2",{children:"INFORMACION COMPRA \n\nCodigo:".concat(A.CompraId," ")}),(0,v.jsxs)(i.Ay,{container:!0,spacing:2,children:[(0,v.jsxs)(i.Ay,{item:!0,xs:6,children:[(0,v.jsx)(s.A,{variant:"body1",sx:{color:"gray"},children:"Nombre"}),(0,v.jsx)(s.A,{variant:"body1",sx:{color:"gray"},children:"Barrio"}),(0,v.jsx)(s.A,{variant:"body1",sx:{color:"gray"},children:"Contacto"}),(0,v.jsx)(s.A,{variant:"body1",sx:{color:"gray"},children:"Lugar de Retiro"}),(0,v.jsx)(s.A,{variant:"body1",sx:{color:"gray"},children:"Beneficio"})]}),(0,v.jsx)(i.Ay,{item:!0,xs:6,children:(0,v.jsx)(s.A,{variant:"body1",children:(0,v.jsx)(s.A,{variant:"body1",children:"(5%) = 1000 xfas"})})})]}),(0,v.jsx)(d.A,{data:P,enviado:J})]})})]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(i.Ay,{item:!0,xs:6,children:[(0,v.jsx)("h2",{children:"INFORMACION COMPRA\n\nCodigo:".concat(A.CompraId," ")}),(0,v.jsx)(c.A,{sx:{p:1,display:"flex",justifyContent:"center"},children:(0,v.jsxs)(i.Ay,{container:!0,spacing:2,children:[(0,v.jsx)(i.Ay,{item:!0,xs:6,children:(0,v.jsx)(s.A,{variant:"body1",sx:{color:"gray"},children:"Beneficio"})}),(0,v.jsx)(i.Ay,{item:!0,xs:6,children:(0,v.jsx)(s.A,{variant:"body1",children:"(5%) = 1000 xfas"})})]})}),null!==A.Imagen?(0,v.jsx)("div",{style:{display:"flex",marginTop:"10px",justifyContent:"center",alignItems:"center"},children:(0,v.jsx)("div",{style:{width:"50%",height:"50%"},children:(0,v.jsx)("img",{src:null===A||void 0===A?void 0:A.Imagen,alt:"Image",style:{width:"100%",height:"50%",objectFit:"contain"}})})}):null,"Exterior"===A.Contexto?"Verificando..."===A.Estado?(0,v.jsxs)("div",{style:{display:"flex",justifyContent:"center",marginBottom:"10px",marginTop:"10px"},children:[(0,v.jsx)(l.A,{onClick:()=>K(),variant:"contained",color:"success",style:{borderRadius:"20px",marginRight:"14px"},children:"RECIBIDO"}),(0,v.jsx)(l.A,{onClick:()=>K(),variant:"contained",color:"primary",style:{borderRadius:"20px",marginRight:"14px"},children:"Comprado"}),(0,v.jsx)(l.A,{onClick:()=>K(),variant:"contained",color:"error",style:{borderRadius:"10px",marginRight:"14px"},children:"Error"})]}):"Comprado"===A.Estado?(0,v.jsx)("div",{style:{display:"flex",justifyContent:"center",marginBottom:"10px",marginTop:"10px"},children:(0,v.jsx)(l.A,{onClick:()=>K(),variant:"contained",color:"primary",style:{borderRadius:"20px",marginRight:"14px"},children:"Enviado"})}):"Enviado"===A.Estado?(0,v.jsx)("div",{style:{display:"flex",justifyContent:"center",marginBottom:"10px",marginTop:"10px"},children:(0,v.jsx)(l.A,{onClick:()=>K(),variant:"contained",color:"primary",style:{borderRadius:"20px",marginRight:"14px"},children:"Retirado"})}):null:null]}),""===t?(0,v.jsxs)(i.Ay,{item:!0,xs:6,children:[(0,v.jsx)("h2",{children:"".concat(P.length," PRODUCTOS COMPRADOS ")}),(0,v.jsx)(c.A,{sx:{p:2,flexDirection:"row"},children:(0,v.jsx)(d.A,{data:P,enviado:J})})]}):null]})}),_?(0,v.jsxs)("div",{children:[null!==A.Imagen?(0,v.jsx)("div",{style:{display:"flex",marginTop:"10px",justifyContent:"center",alignItems:"center"},children:(0,v.jsx)("div",{style:{width:"50%",height:"50%"},children:(0,v.jsx)("img",{src:A.Imagen,alt:"Image",style:{width:"100%",height:"50%",objectFit:"contain"}})})}):null,"Exterior"===A.Contexto?"Verificando..."===A.Estado?(0,v.jsxs)("div",{style:{display:"flex",justifyContent:"center",marginBottom:"10px",marginTop:"10px"},children:[(0,v.jsx)(l.A,{onClick:()=>K(),variant:"contained",color:"primary",style:{borderRadius:"20px",marginRight:"14px"},children:"Comprado"}),(0,v.jsx)(l.A,{onClick:()=>K(),variant:"contained",color:"error",style:{borderRadius:"10px",marginRight:"14px"},children:"Error"})]}):"Comprado"===A.Estado?(0,v.jsx)("div",{style:{display:"flex",justifyContent:"center",marginBottom:"10px",marginTop:"10px"},children:(0,v.jsx)(l.A,{onClick:()=>K(),variant:"contained",color:"primary",style:{borderRadius:"20px",marginRight:"14px"},children:"Enviado"})}):"Enviado"===A.Estado?(0,v.jsx)("div",{style:{display:"flex",justifyContent:"center",marginBottom:"10px",marginTop:"10px"},children:(0,v.jsx)(l.A,{onClick:()=>K(),variant:"contained",color:"primary",style:{borderRadius:"20px",marginRight:"14px"},children:"Retirado"})}):null:null]}):null]}),"Nacional"===A.Contexto&&(0,v.jsx)("button",{onClick:V,children:"CONFIRMAR COMPRA "})]})}},7938:(e,o,t)=>{"use strict";t.d(o,{A:()=>d});var n=t(899),r=t(6491),a=t(226),i=t(3464),c=t(9950),s=t(8429),l=t(4414);const d=function(e){let{data:o,enviado:t,isBuscar:d}=e;const[p,u]=(0,c.useState)(!1),[y,m]=(0,c.useState)(null),f=(0,s.Zp)(),x=e=>{m(e),u(!0)};return console.log(o),(0,l.jsxs)(l.Fragment,{children:[o.map(((e,o)=>(0,l.jsx)(n.Ay,{container:!0,justifyContent:"center",children:(0,l.jsx)(n.Ay,{item:!0,xs:12,sm:10,children:"Exterior"===e.contexto?(0,l.jsxs)(r.A,{display:"flex",alignItems:"center",p:1,borderRadius:8,boxShadow:3,width:"100%",children:[(0,l.jsx)("img",{src:e.Imagen,alt:"Sample",style:{borderRadius:"30%",width:"100%",maxWidth:"80px",marginRight:"16px"},onClick:()=>x(e.Imagen)}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{children:e.Titulo}),(0,l.jsx)("p",{children:e.Detalles})]})]}):(0,l.jsx)("div",{style:{marginTop:15},children:(0,l.jsxs)(r.A,{display:"flex",alignItems:"center",p:1,borderRadius:8,onClick:()=>(e=>{if(d){let o="Guinea Ecuatorial"!==e.Pais?"Exterior":"Nacional";f("/Buscar/Editar/".concat(e.Codigo,"/").concat(o))}})(e),boxShadow:3,width:"100%",children:[(0,l.jsx)("img",{src:e.Imagen,alt:"Sample",style:{borderRadius:"30%",width:"100%",maxWidth:"80px",marginRight:"16px"},onClick:()=>x(e.Imagen)}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{children:e.Titulo}),d?(0,l.jsx)("p",{children:"Cantidad:".concat(e.Cantidad,"     Stock:").concat(e.Stock,"\n")}):(0,l.jsx)("p",{children:e.Detalles})]}),d?null:"Retirado"!==e.Estado&&(0,l.jsx)("div",{style:{paddingLeft:"10px"},children:(0,l.jsx)(a.A,{onClick:()=>(e=>{"Enviado"===e.Estado?t(e,"Retirado"):t(e,"Enviado")})(e),variant:"contained",color:"primary",style:{borderRadius:"20px",marginRight:"14px"},children:"Comprado"===e.Estado?"Enviado":"Enviado"===e.Estado?"Retirado":null})})]})})})},o))),(0,l.jsx)(i.A,{open:p,onClose:()=>{u(!1),m(null)},maxWidth:"lg",children:(0,l.jsx)("div",{style:{backgroundColor:"rgba(0, 0, 0, 0.8)"},children:(0,l.jsx)("img",{src:y,alt:"Enlarged Sample",style:{width:"100%"}})})})]})}},7243:(e,o,t)=>{"use strict";var n=t(9660),r={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,o){var t,a,i,c,s,l,d=!1;o||(o={}),t=o.debug||!1;try{if(i=n(),c=document.createRange(),s=document.getSelection(),(l=document.createElement("span")).textContent=e,l.ariaHidden="true",l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",l.addEventListener("copy",(function(n){if(n.stopPropagation(),o.format)if(n.preventDefault(),"undefined"===typeof n.clipboardData){t&&console.warn("unable to use e.clipboardData"),t&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var a=r[o.format]||r.default;window.clipboardData.setData(a,e)}else n.clipboardData.clearData(),n.clipboardData.setData(o.format,e);o.onCopy&&(n.preventDefault(),o.onCopy(n.clipboardData))})),document.body.appendChild(l),c.selectNodeContents(l),s.addRange(c),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");d=!0}catch(p){t&&console.error("unable to copy using execCommand: ",p),t&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(o.format||"text",e),o.onCopy&&o.onCopy(window.clipboardData),d=!0}catch(p){t&&console.error("unable to copy using clipboardData: ",p),t&&console.error("falling back to prompt"),a=function(e){var o=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,o)}("message"in o?o.message:"Copy to clipboard: #{key}, Enter"),window.prompt(a,e)}}finally{s&&("function"==typeof s.removeRange?s.removeRange(c):s.removeAllRanges()),l&&document.body.removeChild(l),i()}return d}},4702:(e,o,t)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(o,"__esModule",{value:!0}),o.CopyToClipboard=void 0;var r=c(t(9950)),a=c(t(7243)),i=["text","onCopy","options","children"];function c(e){return e&&e.__esModule?e:{default:e}}function s(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);o&&(n=n.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var o=1;o<arguments.length;o++){var t=null!=arguments[o]?arguments[o]:{};o%2?s(Object(t),!0).forEach((function(o){x(e,o,t[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))}))}return e}function d(e,o){if(null==e)return{};var t,n,r=function(e,o){if(null==e)return{};var t,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],o.indexOf(t)>=0||(r[t]=e[t]);return r}(e,o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],o.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}function p(e,o){for(var t=0;t<o.length;t++){var n=o[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,o){return u=Object.setPrototypeOf||function(e,o){return e.__proto__=o,e},u(e,o)}function y(e){var o=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=f(e);if(o){var a=f(this).constructor;t=Reflect.construct(r,arguments,a)}else t=r.apply(this,arguments);return function(e,o){if(o&&("object"===n(o)||"function"===typeof o))return o;if(void 0!==o)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}(this,t)}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function x(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}var h=function(e){!function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),o&&u(e,o)}(s,e);var o,t,n,c=y(s);function s(){var e;!function(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this,s);for(var o=arguments.length,t=new Array(o),n=0;n<o;n++)t[n]=arguments[n];return x(m(e=c.call.apply(c,[this].concat(t))),"onClick",(function(o){var t=e.props,n=t.text,i=t.onCopy,c=t.children,s=t.options,l=r.default.Children.only(c),d=(0,a.default)(n,s);i&&i(n,d),l&&l.props&&"function"===typeof l.props.onClick&&l.props.onClick(o)})),e}return o=s,(t=[{key:"render",value:function(){var e=this.props,o=(e.text,e.onCopy,e.options,e.children),t=d(e,i),n=r.default.Children.only(o);return r.default.cloneElement(n,l(l({},t),{},{onClick:this.onClick}))}}])&&p(o.prototype,t),n&&p(o,n),Object.defineProperty(o,"prototype",{writable:!1}),s}(r.default.PureComponent);o.CopyToClipboard=h,x(h,"defaultProps",{onCopy:void 0,options:void 0})},5189:(e,o,t)=>{"use strict";var n=t(4702).CopyToClipboard;n.CopyToClipboard=n,e.exports=n},9660:e=>{e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var o=document.activeElement,t=[],n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));switch(o.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":o.blur();break;default:o=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||t.forEach((function(o){e.addRange(o)})),o&&o.focus()}}}}]);