"use strict";(self.webpackChunkmy_react_appo=self.webpackChunkmy_react_appo||[]).push([[655],{3655:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var s=a(9950),r=a(5003),o=a(2845),n=a(4857),l=a(6589),i=a(6639),d=a(294),c=a(3849),u=a(8429),h=a(4414);const p=(0,s.memo)(r.A);let f={data:null,firstId:null,lastFetchAt:null};const v=function(){var e;const t=(0,n.A)(),a=(0,l.A)(t.breakpoints.down("sm")),r=(0,s.useMemo)((()=>(0,c.aU)(d.A)),[]),v=(null===(e=(0,u.zy)().state)||void 0===e?void 0:e.userName)||"",[m,x]=(0,s.useState)((()=>{var e;return null!==(e=f.data)&&void 0!==e?e:[]})),[y,A]=(0,s.useState)(!1),[g,j]=(0,s.useState)(!1),b=(0,s.useCallback)((async()=>{try{var e,t;A(!0);const a=(0,c.rJ)(r,"compras"),s=(0,c.P)(a,(0,c.My)("Fecha","desc"),(0,c.AB)(10)),o=(await(0,c.GG)(s)).docs.map((e=>({id:e.id,...e.data()}))),n=null!==(e=null===(t=o[0])||void 0===t?void 0:t.id)&&void 0!==e?e:null,l=Boolean(f.firstId&&n&&n!==f.firstId);j(l),f={data:o,firstId:n,lastFetchAt:Date.now()},x(o)}catch(a){console.error("Error fetching Compras/Exterior:",a)}finally{A(!1)}}),[r]);(0,s.useEffect)((()=>{var e;null!==(e=f.data)&&void 0!==e&&e.length&&x(f.data)}),[]);const w=y&&0===m.length,k=!y&&Array.isArray(m)&&0===m.length;return(0,h.jsxs)("div",{style:{marginTop:a?65:10,scrollBehavior:"smooth"},children:[(0,h.jsx)(o.A,{texto:"Exterior"}),(0,h.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:12,marginTop:12,marginBottom:12,alignItems:"center"},children:[(0,h.jsx)("button",{onClick:b,disabled:y,children:y?"Actualizando...":"Refrescar"}),!y&&g&&(0,h.jsx)("span",{style:{fontSize:14},children:"\ud83c\udd95 Hay novedades"})]}),w?(0,h.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:(0,h.jsx)(i.A,{})}):k?(0,h.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:18},children:(0,h.jsxs)("p",{style:{color:"gray",fontSize:14,textAlign:"center",maxWidth:420},children:["No hay compras para mostrar ahora mismo. Pulsa ",(0,h.jsx)("b",{children:"Refrescar"})," en unos segundos."]})}):(0,h.jsx)(p,{dats:m,venta:!1,valor:"Exterior",userName:v})]})}},5003:(e,t,a)=>{a.d(t,{A:()=>c});var s=a(4436),r=a(6589),o=a(6491),n=a(2053),l=a(9950),i=a(8429),d=(a(1975),a(4414));const c=function(e){let{dats:t,valor:a,userName:c}=e;const u=(0,i.Zp)(),h=(0,s.A)(),p=(0,r.A)(h.breakpoints.down("sm")),[f,v]=(0,l.useState)(t);return console.log(t),null===t||void 0===t?void 0:t.map((e=>(0,d.jsxs)(o.A,{onClick:()=>{return t=e.id,void u("/".concat(a,"/Detalles/").concat(t),{state:{userName:c}});var t},sx:{display:"flex",justifyContent:"space-between",cursor:"pointer","&:hover":{backgroundColor:p?"none":"#f0f0f0"},padding:"8px",borderRadius:"4px",width:"80vw",flexGrow:1,flexShrink:1,overflowX:"hidden",maxWidth:p?"100%":"90vw"},children:[(0,d.jsx)(n.A,{children:e.id}),(0,d.jsx)(n.A,{color:"Retirado"!==e.Estado?"red":null,children:e.Estado})]},e.Codigo)))}}}]);