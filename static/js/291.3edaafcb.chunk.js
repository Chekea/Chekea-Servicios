"use strict";(self.webpackChunkmy_react_appo=self.webpackChunkmy_react_appo||[]).push([[291],{1291:(e,t,n)=>{n.r(t),n.d(t,{default:()=>A});var a=n(9950),o=n(6491),r=n(5333),i=n(6639),s=n(899),l=n(2053),c=n(5277),d=n(20),m=n(9890),u=n(226),p=n(7901),x=n(2578),g=n(3849),b=n(1975),h=n(294),f=n(2845),y=n(9751),j=n(4414);const w=e=>{let{file:t,onRemove:n,index:i,sx:s}=e;const[l,c]=(0,a.useState)("");return(0,a.useEffect)((()=>{if(t){const e=URL.createObjectURL(t);return c(e),()=>{URL.revokeObjectURL(e)}}}),[t]),(0,j.jsx)(o.A,{sx:{position:"relative",display:"inline-block"},children:t?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("img",{src:l,alt:"Preview",style:{maxWidth:"100px",maxHeight:"100px"}}),(0,j.jsx)(r.A,{color:"error",size:"small",onClick:()=>n(t),sx:{position:"absolute",top:0,right:0},children:"\xd7"})]}):(0,j.jsx)(o.A,{sx:{width:"100px",height:"100px",border:"1px dashed gray",display:"flex",alignItems:"center",justifyContent:"center",color:"gray"},children:i+1})})},A=()=>{const[e,t]=(0,a.useState)(""),[n,A]=(0,a.useState)(""),[C,v]=(0,a.useState)(""),[S,k]=(0,a.useState)(""),[z,P]=(0,a.useState)(0),[E,I]=(0,a.useState)(""),[D,R]=(0,a.useState)(!1),[W,F]=(0,a.useState)(""),[B,q]=(0,a.useState)([]),[H,L]=(0,a.useState)("Aerea"),[U,K]=(0,a.useState)(null),[M,T]=(0,a.useState)(null),[O,N]=(0,a.useState)([]),[Z,J]=(0,a.useState)(!0),[_,V]=(0,a.useState)(null),[Y,G]=(0,a.useState)(null),[Q,X]=(0,a.useState)(null),[$,ee]=(0,a.useState)(null);let te="Moda & Accesorios",ne="China";const[ae,oe]=(0,a.useState)([]),[re,ie]=(0,a.useState)([]);console.log(te);const[se,le]=(0,a.useState)([]),[ce,de]=(0,a.useState)({}),[me,ue]=(0,a.useState)(""),[pe,xe]=(0,a.useState)(""),[ge,be]=(0,a.useState)(""),he=((0,x.C3)(h.A),(0,g.aU)(h.A));const fe=(0,y.c7)(h.A);(0,x.C3)(h.A),(0,g.aU)(h.A);const ye=()=>Date.now();function je(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s]/gi,"")}console.log("hola mundo cruel");const[we,Ae]=(0,a.useState)([]);return(0,j.jsxs)(j.Fragment,{children:[D&&(0,j.jsx)(o.A,{sx:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",bgcolor:"rgba(0,0,0,0.4)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:9999},children:(0,j.jsx)(i.A,{size:60,color:"primary"})}),(0,j.jsxs)(o.A,{sx:{paddingTop:{xs:10,sm:20}},children:[(0,j.jsx)(f.A,{texto:"Publicar Prod"}),(0,j.jsxs)(s.Ay,{item:!0,xs:12,children:[(0,j.jsx)(l.A,{variant:"subtitle1",gutterBottom:!0,children:"Minimo 4 Imagenes (Max 9)"}),(0,j.jsx)("input",{accept:"image/*",id:"upload-images",multiple:!0,type:"file",style:{display:"none"},onChange:async e=>{const t=Array.from(e.target.files);if(t.length+B.length>9)return alert("You can upload up to 9 images only.");try{const e=await Promise.all(t.map((async e=>{console.log("Original: ".concat(e.name,", ").concat((e.size/1024).toFixed(2)," KB"));const t=await(0,b.w4)(e);return console.log("Compressed: ".concat(t.name,", ").concat((t.size/1024).toFixed(2)," KB")),t})));q((t=>[...t,...e]))}catch(n){console.error("Image compression failed:",n)}}}),(0,j.jsx)("label",{htmlFor:"upload-images",children:(0,j.jsx)(r.A,{color:"primary",component:"span",children:(0,j.jsx)(p.A,{})})}),(0,j.jsx)(o.A,{sx:{mt:2,display:"flex",flexWrap:"wrap",gap:2},children:B.map(((e,t)=>{const n=t===B.length-1;B.length;return(0,j.jsx)(o.A,{children:(0,j.jsx)(w,{file:e,sx:{border:n?"2px solid red":"none"},onRemove:()=>(e=>{q(B.filter(((t,n)=>n!==e)))})(t),index:t})},t)}))})]}),(0,j.jsxs)(o.A,{component:"form",onSubmit:async a=>{a.preventDefault(),R(!0);try{if(B.length<3)throw new Error("Cuidado!!!, Se necesitan al menos 3 im\xe1genes para continuar.");if(!$)throw new Error("Cuidado!!!, no haz seleccionado la subcategorias");if(!Y)throw new Error("Cuidado!!!, no haz seleccionado un peso.");if((!se||0===se.length)&&(!O||0===O.length))throw new Error("Cuidado!!!, debes agregar al menos un color o un estilo para continuar.");const a=(0,g.H9)((0,g.rJ)(he,"productos")),o=a.id,r=ye();let i=await(async(t,a)=>{const o=je(e).toLowerCase().split(" ").filter((e=>e.length>=4)).slice(0,6),r={Titulo:e,Ttoken:o,Categoria:te,Subcategoria:$,Codigo:t,Precio:parseInt(n),Peso:Y,Dimension:Q||"Paquete mediano",Detalles:W,Vistos:0,Vendedor:"y7eJBoQ23feGEF3HAF2sZxpDKig1",Fecha:a,Pais:ne};return r})(o,r);const s=await(async e=>{const t=[];try{for(let n=0;n<e.length;n++){const a=e[n];console.log(a,a.type);const o=(0,y.KR)(fe,"Imagenes/Productos/".concat(ye(),".jpeg"));await(0,y.D)(o,a);const r=await(0,y.qk)(o);t.push(r)}}catch(n){console.error("Error uploading images: ",n)}return t})(B),{principal:l,real:c,paquete:d,extraImages:m}=(e=>{if(e.length<3)throw new Error("Se necesitan al menos 3 im\xe1genes.");return{principal:e[0],extraImages:e.slice(1)}})(s);i.Imagen=l,await(0,g.BN)(a,i),m.length>0&&await(async(e,t)=>{for(const n of t){const t=(0,g.H9)((0,g.rJ)(he,"productos/".concat(e,"/imagenesExtra"))).id;await(0,g.BN)((0,g.H9)(he,"productos/".concat(e,"/imagenesExtra/").concat(t)),{id:t,url:n})}})(o,m),se.length>0&&await(async(e,t)=>{const n=[];for(const a of t){const t=(0,g.H9)((0,g.rJ)(he,"productos/".concat(e,"/colores"))).id,o={id:t,label:a};n.push(o),await(0,g.BN)((0,g.H9)(he,"productos/".concat(e,"/colores/").concat(t)),o)}return n})(o,se),O.length>0&&await(async(e,t,n)=>{const a=[];for(const o of t){const t=(0,g.H9)((0,g.rJ)(he,"productos/".concat(e,"/tallas"))).id,r={id:t,label:o,precio:parseInt(n[o])||0};a.push(r),await(0,g.BN)((0,g.H9)(he,"productos/".concat(e,"/tallas/").concat(t)),r)}return a})(o,O,ce),R(!1),q([]),le([]),N([]),t(""),F(""),A(""),console.log(i),alert("Producto subido correctamente!")}catch(o){R(!1),console.error("Error al subir el producto:",o),alert("ERROR INESPERADO: "+o.message)}},sx:{padding:2,paddingTop:8},children:[(0,j.jsxs)("div",{style:{width:"100%",margin:10,padding:20,border:"2px solid #ccc",borderRadius:10,position:"relative",boxSizing:"border-box",backgroundColor:"#fff"},children:[(0,j.jsx)("span",{style:{position:"absolute",top:-12,left:20,backgroundColor:"#fff",padding:"0 8px",fontSize:16,fontWeight:"bold",color:"#333"},children:"Subcategorias"}),(0,j.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",width:"100%"},children:[{nombre:"Trajes",estimacion:{min:.8,max:1.4}},{nombre:"Vestidos",estimacion:{min:.5,max:1}},{nombre:"Camisas",estimacion:{min:.2,max:.5}},{nombre:"Bolsos",estimacion:{min:.3,max:.9}},{nombre:"Calzado",estimacion:{min:.6,max:1.2}},{nombre:"Faldas",estimacion:{min:.3,max:.7}}].map((e=>(0,j.jsx)(c.A,{label:"".concat(e.nombre," Estimacion: ").concat(e.estimacion.min," - ").concat(e.estimacion.max," Kg"),style:{margin:5},clickable:!0,onClick:()=>(e=>{ee(Y===e?null:e)})(e.nombre),color:$===e.nombre?"primary":"default"},e.nombre)))})]}),(0,j.jsxs)("div",{style:{width:"100%",margin:10,padding:20,border:"2px solid #ccc",borderRadius:10,position:"relative",boxSizing:"border-box",backgroundColor:"#fff"},children:[(0,j.jsx)("span",{style:{position:"absolute",top:-12,left:20,backgroundColor:"#fff",padding:"0 8px",fontSize:16,fontWeight:"bold",color:"#333"},children:"Pesos"}),(0,j.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",width:"100%"},children:[{nombre:"Ultraligero",min:.1,max:.5},{nombre:"Ligero",min:.51,max:1.5},{nombre:"Medio",min:1.51,max:3},{nombre:"Pesado",min:3.01,max:4.5},{nombre:"Muy pesado",min:4.51,max:5.5},{nombre:"Extremadamente pesado",min:5.51,max:6}].map((e=>(0,j.jsx)(c.A,{label:"min ".concat(e.min," - max ").concat(e.max," Kg"),style:{margin:5},clickable:!0,onClick:()=>(e=>{G(Y===e?null:e)})(e.nombre),color:Y===e.nombre?"primary":"default"},e.nombre)))})]}),["Pesado","Muy pesado","Extremadamente pesado"].includes(Y)&&(0,j.jsxs)("div",{style:{width:"100%",margin:10,padding:20,border:"2px solid #ccc",borderRadius:10,position:"relative",boxSizing:"border-box",backgroundColor:"#fff"},children:[(0,j.jsx)("span",{style:{position:"absolute",top:-12,left:20,backgroundColor:"#fff",padding:"0 8px",fontSize:16,fontWeight:"bold",color:"#333"},children:"Dimensiones"}),(0,j.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",width:"100%"},children:[{nombre:"Paquete peque\xf1o",min:.023,max:.03},{nombre:"Tama\xf1o personal",min:.031,max:.15},{nombre:"Paquete mediano",min:.151,max:.4},{nombre:"Paquete grande",min:.401,max:.8},{nombre:"Caja est\xe1ndar",min:.801,max:1.2},{nombre:"Caja extra grande",min:1.201,max:1.8},{nombre:"Carga pesada",min:1.801,max:2.2},{nombre:"Carga industrial",min:2.201,max:3}].map((e=>(0,j.jsx)(c.A,{label:"min ".concat(e.min," - max ").concat(e.max," cm\xb3"),style:{margin:5},clickable:!0,onClick:()=>(e=>{X(Y===e?null:e)})(e.nombre),color:Q===e.nombre?"primary":"default"},e.nombre)))})]}),(0,j.jsxs)(s.Ay,{container:!0,spacing:2,children:[(0,j.jsx)(s.Ay,{item:!0,xs:12,children:(0,j.jsx)(d.A,{label:"Titulo",variant:"outlined",value:e,onChange:e=>t((0,b.Zr)(e.target.value)),required:!0,fullWidth:!0})}),(0,j.jsx)(s.Ay,{item:!0,xs:12,children:(0,j.jsx)(d.A,{label:"Precio",variant:"outlined",type:"number",value:n,onChange:e=>A(e.target.value),required:!0,fullWidth:!0,sx:{"& input::-webkit-outer-spin-button, & input::-webkit-inner-spin-button":{WebkitAppearance:"none",margin:0},"& input[type=number]":{MozAppearance:"textfield"}}})}),!1,(0,j.jsx)(s.Ay,{item:!0,xs:12,children:(0,j.jsx)(d.A,{label:"Detalles",variant:"outlined",multiline:!0,rows:4,value:W,onChange:e=>F(e.target.value),fullWidth:!0})}),(0,j.jsxs)(s.Ay,{item:!0,xs:12,children:[(0,j.jsxs)("div",{style:{margin:10},children:[(0,j.jsx)(m.A,{value:me,onChange:e=>ue(e.target.value),onKeyDown:e=>{"Enter"!==e.key&&","!==e.key||(e.preventDefault(),me.trim()&&(le([...se,(0,b.Zr)(me.trim())]),ue("")))},placeholder:"Introduzca Color"}),se.map(((e,t)=>(0,j.jsx)(c.A,{label:e,style:{margin:3},onDelete:()=>{return t=e,void le(se.filter((e=>e!==t)));var t}},t)))]}),(0,j.jsxs)("div",{style:{margin:10},children:[(0,j.jsx)(m.A,{value:pe,onChange:e=>xe(e.target.value),onKeyDown:e=>{"Enter"!==e.key&&","!==e.key||(e.preventDefault(),pe.trim()&&(N([...O,(0,b.Zr)(pe.trim())]),de({...ce,[(0,b.Zr)(pe.trim())]:""}),xe("")))},placeholder:"Introduzca Estilo"}),O.map(((e,t)=>(0,j.jsxs)(o.A,{display:"flex",alignItems:"center",marginY:1,children:[(0,j.jsx)(c.A,{label:e,style:{margin:3},onDelete:()=>(e=>{console.log("wettin"),N(O.filter((t=>t!==e)));const t={...ce};delete t[e],de(t)})(e)}),(0,j.jsx)(d.A,{label:"Price",type:"number",value:ce[e]||"",onChange:t=>((e,t)=>{de({...ce,[t]:e.target.value})})(t,e),sx:{"& input::-webkit-outer-spin-button, & input::-webkit-inner-spin-button":{WebkitAppearance:"none",margin:0},"& input[type=number]":{MozAppearance:"textfield"}}})]},t)))]})]}),(0,j.jsx)(s.Ay,{item:!0,xs:12,display:"flex",justifyContent:"center",alignItems:"center",children:(0,j.jsx)(u.A,{type:"submit",variant:"contained",color:"primary",children:"PUBLICAR PRODUCTO"})})]})]})]})]})}},2845:(e,t,n)=>{n.d(t,{A:()=>m});var a=n(9950),o=n(8429),r=n(4857),i=n(6589),s=n(5333),l=n(3189),c=n(4414);const d=e=>{let{texto:t}=e;const n=(0,r.A)(),a=(0,i.A)(n.breakpoints.down("sm")),d=(0,o.Zp)();return(0,c.jsx)(c.Fragment,{children:a&&(0,c.jsxs)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:60,padding:n.spacing(1),backgroundColor:n.palette.background.paper,boxShadow:n.shadows[2],display:"flex",alignItems:"center",zIndex:1e3,boxSizing:"border-box"},children:[(0,c.jsx)(s.A,{onClick:()=>d(-1),"aria-label":"back",children:(0,c.jsx)(l.A,{})}),(0,c.jsx)("h2",{style:{marginLeft:n.spacing(2)},children:t})]})})},m=a.memo(d)}}]);